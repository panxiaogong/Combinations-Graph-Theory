## 区组设计
&emsp;&emsp;一个所谓的**区组设计**(Block design)，是指序对 $(X,\mathcal{A})$ ，满足：
- $X$ 是一个有限集，其中的元素称为“点”
- $\mathcal{A}$ 是一个由 $X$ 的子集组成的集合，每一个子集称为“区组”。

&emsp;&emsp;比如由 $X=\\{A,B,C,D\\}$ ， $\mathcal{A}=\\{\\{A,B,C,D\\},\\{A,C,D\\},\\{A,C\\},\\{B,D\\}\\}$ 构成的序对 $(X,\mathcal{A})$ ，就是一个区组设计。另外，如果 $\mathcal{A}$ 中不包含重复的元素，那么就称其为**简单设计**，相比于有重复区组，我们更喜欢研究无重复区组的设计，也就是简单设计。

&emsp;&emsp;下面我们来看一种特殊的区组设计：平衡不完全区组设计(balanced incomplete block design)。

&emsp;&emsp;设 $v,k,\lambda$ 为正整数，满足 $v>k\geqslant 2$ 。一个 $(v,k,\lambda)$ 平衡不完全区组设计，简记为 $(v,k,\lambda)-BIBD$ ，是一个满足下述性质的区组设计：
- $|X|=v$ 。
- 每个区组恰好包含 $k$ 个点。
- 任意两个点恰好同时出现在 $\lambda$ 个区组中。

&emsp;&emsp;比如，将 $\mathcal{A}$ 取为 $X$ 的所有 $k$ 元子集，那任意的两个点同时出现在了多少个区组中呢？只需要考虑区组中剩余的 $k-2$ 个位置有多少种选法，就是 $\binom{v-2}{k-2}$ ，那么此时序对 $(X,\mathcal{A})$ 就是一个 $(v,k,\binom{v-2}{k-2})-BIBD$ 。下面我们来看几个十分著名的BIBD例子。

**(7,3,1)-BIBD**

&emsp;&emsp;在该BIBD中：
- $X=\\{1,2,3,4,5,6,7\\}$
- $\mathcal{A}=\\{123,145,167,246,257,347,356\\}$   
  神奇的是，该BIBD对应着一个名叫Fano平面的图形，如下：
  
<p align="center">
<img src="https://github.com/user-attachments/assets/9a3501a2-ac28-4500-9a69-1cc60257279b" width="250" />

&emsp;&emsp;你会发现，每一个区组所对应的三个点是“共线的”（我不知道有没有这个专业术语），比如说123，145，比较特殊的则是257，三个点在同一个圆上，而且，如果我们将这7个点用二进制形式表示：1=(0,0,1)，2=(0,1,0)，3=(0,1,1)，4=(1,0,0)，5=(1,0,1)，6=(1,1,0)，7=(1,1,1)，那么三个点构成一个区组的充要条件是 $x+y=z$ ，就拿区组123举例，显然有：(0,0,1)+(0,1,0)=(0,1,1)。

**(9,3,1)-BIBD**

&emsp;&emsp;在该BIBD中：
- $X=\\{1,2,3,4,5,6,7,8,9\\}$
- $\mathcal{A}=\\{123,456,789,147,258,369,159,267,348,357,168,249\\}$
  那该如何书写这个BIBD呢？你只需要一个九宫格：
  


&emsp;&emsp;这12个区组，对应着该九宫格的行、列、主对角线方向以及副对角线方向。

&emsp;&emsp;那是否还存在其他的 $(x,3,1)-BIBD$ 呢？我们下面来讨论一下BIBD形成的必要条件。

&emsp;&emsp;我们引入另外两个参数， $b$ 与 $r$ ，其中， $b$ 是区组的数目，也就是集合 $\mathcal{A}$ 的元素个数， 而 $r$ 是指每个元素在各区组中出现的总次数，那就会有一些限制：
- 我们考虑任意一个元素在这些区组里总共会碰到多少次其他的元素：一个元素总共出现 $r$ 次，也就是出现在 $r$ 个 $k$ 元集合，在每个集合里它会遇到 $k-1$ 个其他的元素，那么一共碰到了 $r(k-1)$ 次，由BIBD的定义，任意两个元素都会碰见 $\lambda$ 次，所以该元素同剩下的 $v-1$ 个元素中的每一个都会碰见 $\lambda$ 次，所以有 $r(k-1)=\lambda(v-1)$ 。（双计数证明）
- 我们考虑这些元素一共出现了多少次：总共有 $b$ 个区组，每个区组有 $k$ 个元素，所以这些元素一共出现了 $bk$ 次，另一方面，由于每个元素都要出现 $r$ 次，总共有 $v$ 个元素，所以一共出现了 $vr$ 次，所以有 $bk=vr$ 。

&emsp;&emsp;综上，我们有：

$$\begin{align\*}
r=\frac{\lambda(v-1)}{k-1}\\
b=\frac{vr}{k}=\frac{\lambda v(v-1)}{k(k-1)}\\
\end{align\*}$$

&emsp;&emsp;实际上，之所以我们在简记BIBD时省略 $b,r$ 这两个参数，也是因为这两个参数可以通过另外三个参数算出来，所以省略不写。另外，由于 $b,r$ 必须是整数，所以参数之间必须要有如下的整除关系：

$$\begin{align\*}
k-1|\lambda(v-1),k(k-1)|\lambda v(v-1)
\end{align\*}$$











