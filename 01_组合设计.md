## 区组设计
&emsp;&emsp;一个所谓的**区组设计**(Block design)，是指序对 $(X,\mathcal{A})$ ，满足：
- $X$ 是一个有限集，其中的元素称为“点”
- $\mathcal{A}$ 是一个由 $X$ 的子集组成的集合，每一个子集称为“区组”。

&emsp;&emsp;比如由 $X=\\{A,B,C,D\\}$ ， $\mathcal{A}=\\{\\{A,B,C,D\\},\\{A,C,D\\},\\{A,C\\},\\{B,D\\}\\}$ 构成的序对 $(X,\mathcal{A})$ ，就是一个区组设计。另外，如果 $\mathcal{A}$ 中不包含重复的元素，那么就称其为**简单设计**，相比于有重复区组，我们更喜欢研究无重复区组的设计，也就是简单设计。

&emsp;&emsp;下面我们来看一种特殊的区组设计：平衡不完全区组设计(balanced incomplete block design)。

&emsp;&emsp;设 $v,k,\lambda$ 为正整数，满足 $v>k\geqslant 2$ 。一个 $(v,k,\lambda)$ 平衡不完全区组设计，简记为 $(v,k,\lambda)-BIBD$ ，是一个满足下述性质的区组设计：
- $|X|=v$ 。
- 每个区组恰好包含 $k$ 个点。
- 任意两个点恰好同时出现在 $\lambda$ 个区组中。

&emsp;&emsp;比如，将 $\mathcal{A}$ 取为 $X$ 的所有 $k$ 元子集，那任意的两个点同时出现在了多少个区组中呢？只需要考虑区组中剩余的 $k-2$ 个位置有多少种选法，就是 $\binom{v-2}{k-2}$ ，那么此时序对 $(X,\mathcal{A})$ 就是一个 $(v,k,\binom{v-2}{k-2})-BIBD$ 。下面我们来看几个十分著名的BIBD例子。

### (7,3,1)-BIBD

&emsp;&emsp;在该BIBD中：
- $X=\\{1,2,3,4,5,6,7\\}$
- $\mathcal{A}=\\{123,145,167,246,257,347,356\\}$   
  神奇的是，该BIBD对应着一个名叫Fano平面的图形，如下：
  
<p align="center">
<img src="https://github.com/user-attachments/assets/9a3501a2-ac28-4500-9a69-1cc60257279b" width="250" />

&emsp;&emsp;你会发现，每一个区组所对应的三个点是“共线的”（我不知道有没有这个专业术语），比如说123，145，比较特殊的则是257，三个点在同一个圆上，而且，如果我们将这7个点用二进制形式表示：1=(0,0,1)，2=(0,1,0)，3=(0,1,1)，4=(1,0,0)，5=(1,0,1)，6=(1,1,0)，7=(1,1,1)，那么三个点构成一个区组的充要条件是 $x+y=z$ ，就拿区组123举例，显然有：(0,0,1)+(0,1,0)=(0,1,1)。

### (9,3,1)-BIBD

&emsp;&emsp;在该BIBD中：
- $X=\\{1,2,3,4,5,6,7,8,9\\}$
- $\mathcal{A}=\\{123,456,789,147,258,369,159,267,348,357,168,249\\}$
  那该如何书写这个BIBD呢？你只需要一个九宫格：
  


&emsp;&emsp;这12个区组，对应着该九宫格的行、列、主对角线方向以及副对角线方向。

&emsp;&emsp;那是否还存在其他的 $(x,3,1)-BIBD$ 呢？我们下面来讨论一下BIBD形成的必要条件。

&emsp;&emsp;我们引入另外两个参数， $b$ 与 $r$ ，其中， $b$ 是区组的数目，也就是集合 $\mathcal{A}$ 的元素个数， 而 $r$ 是指每个元素在各区组中出现的总次数，那就会有一些限制：
- 我们考虑任意一个元素在这些区组里总共会碰到多少次其他的元素：一个元素总共出现 $r$ 次，也就是出现在 $r$ 个 $k$ 元集合，在每个集合里它会遇到 $k-1$ 个其他的元素，那么一共碰到了 $r(k-1)$ 次，由BIBD的定义，任意两个元素都会碰见 $\lambda$ 次，所以该元素同剩下的 $v-1$ 个元素中的每一个都会碰见 $\lambda$ 次，所以有 $r(k-1)=\lambda(v-1)$ 。（双计数证明）
- 我们考虑这些元素一共出现了多少次：总共有 $b$ 个区组，每个区组有 $k$ 个元素，所以这些元素一共出现了 $bk$ 次，另一方面，由于每个元素都要出现 $r$ 次，总共有 $v$ 个元素，所以一共出现了 $vr$ 次，所以有 $bk=vr$ 。

&emsp;&emsp;综上，我们有：

$$\begin{align\*}
r=\frac{\lambda(v-1)}{k-1}\\
b=\frac{vr}{k}=\frac{\lambda v(v-1)}{k(k-1)}\\
\end{align\*}$$

&emsp;&emsp;实际上，之所以我们在简记BIBD时省略 $b,r$ 这两个参数，也是因为这两个参数可以通过另外三个参数算出来，所以省略不写。另外，由于 $b,r$ 必须是整数，所以参数之间必须要有如下的整除关系：

$$\begin{align\*}
k-1|\lambda(v-1),k(k-1)|\lambda v(v-1)
\end{align\*}$$

&emsp;&emsp;补充：关于 $(v,3,1)-BIBD$ (又称为Steiner三元系)，它存在的充要条件是 $v\equiv1,3(mod\\;6)$ ，另外，由于上述条件是必要条件，有些参数确实符合，但却没有对应的BIBD，比如 $(19,4,1)-BIBD,(22,8,4)-BIBD$ 实际上是不存在的。

&emsp;&emsp;下面来看一个基于区组设计的具体问题：

&emsp;&emsp;我们有一个一次写入存储器和七条信息，每个比特位的初始状态为0，信息写入的过程只允许将0修改为1，不允许将1修改为0，现在想连续使用该存储器4次，传递七条信息中的四条(可能信息会重复出现)，每次传输一条，请问至少需要多少比特位？

&emsp;&emsp;解：显然，如果我们使用12位比特位，分为四组，每次使用三位，用二进制数表示信息的编号，这是可行的，但是如果我们基于Fano平面，我们只需要7个比特位，就能传输完这四条信息(听上去有些奇怪对吧，你可能会想为什么不传递第几条信息就把第几个位置的比特位变为1呢？比如我要传输1212，前两次还可以正常传递，但是第三次时由于比特位不能从1变0，所以此方法行不通)。下面我们来详细介绍一下借助Fano平面的传输规则(注意，若新的轮次存储与上一轮同样的信息，则无需操作)：
- 第一次传输：传递信息 $i$ 则将第 $i$ 个位置改为1
- 第二次传输：传递信息 $j$ 则将第 $p$ 个位置改为1，使得 $ijp$ 构成区组
- 第三次传输：存储信息 $k$ 则再将两个位置改为1，使得当前4个为1的位置包含一个区组及第 $k$ 个位置。
- 第四次传输：若存储的信息 $l$ 是 $i$  $j$  $p$ 中的某一个，那么将第 $q$ 个位置改为1，使得 $klq$ 形成区组，这样两区组重复的元素就是我们要传递的信息，若存储的信息 $l$ 不是 $i$  $j$  $p$ 中的任意一个，那么将除了第 $l$ 个比特位的其他位置均改为1，使得第 $l$ 个比特位是唯一一个为0的比特位，这就是我们要传输的信息。

&emsp;&emsp;我们举个具体的例子：第一次想传输信息1，那么就将Fano平面上的第1个位置改为1；第二次想传输信息2，那么就将第3个位置改为1，使得123构成区组；第三次想传输信息4，那么就将第2、4个位置改为1，此时123构成区组，4作为区组外的唯一位置，第四次想传输的信息如果是1、2、3中的某一个，比如说2，那么就将第6个位置改为1，使得图上有区组123和246，如果不是1、2、3中的任意一个，比如说7，那么就将第5、6位置改为1，只有第7个位置是0，达到了传输信息的效果。

### 关联矩阵

&emsp;&emsp;






















